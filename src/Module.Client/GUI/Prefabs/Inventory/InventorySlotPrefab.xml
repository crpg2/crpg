<Prefab Name="InventorySlotPrefab">
  <Window>
    <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedHeight="80" SuggestedWidth="80" >
      <Children>
        <BrushWidget Id="Background" AcceptDrop="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Color="#FFFFFFFF">
          <!-- 
          <Children>
            <BrushWidget MarginLeft="5" MarginRight="5" MarginTop="5" MarginBottom="5" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="CrpgInventory.EquipmentSlot.BackGround">
            </BrushWidget>
          </Children>
          -->
        </BrushWidget>
        <ButtonWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" HorizontalAlignment="Center" VerticalAlignment="Center"
                  SuggestedWidth="75" SuggestedHeight="75" AcceptDrag="true" DoNotPassEventsToChildren="true"
                  ClipContents="true" DoNotAcceptEvents="False" 
                  Command.DragBegin="ExecuteDragBegin" Command.DragEnd="ExecuteDragEnd" Command.Click="ExecuteClick" 
                  Command.HoverBegin="ExecuteHoverBegin" Command.HoverEnd="ExecuteHoverEnd" >
          <Children>

            <!-- Default fallback icon -->
            <ImageWidget Sprite="@DefaultSprite"
                IsVisible="@ShowDefaultIcon"
                WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                SuggestedWidth="48" SuggestedHeight="48"
                HorizontalAlignment="Center" VerticalAlignment="Center"
                DoNotAcceptEvents="True" PassEventsToParent="True" />

            <!-- Equipped item icon -->
            <ImageIdentifierWidget DataSource="{ImageIdentifier}"
                ImageId="@Id"
                AdditionalArgs="@AdditionalArgs"
                ImageTypeCode="@ImageTypeCode"
                WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
                SuggestedWidth="90" SuggestedHeight="45"
                HorizontalAlignment="Center" VerticalAlignment="Center"
                Margin="4"
                DoNotAcceptEvents="True" PassEventsToParent="True" />
            
            <!-- Item rank icon (heirlooms)-->
            <BrushWidget Id="ItemRank1" Brush="Item.Rank.Icon_1" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
              SuggestedWidth="15" SuggestedHeight="15" IsVisible="@Rank1Visible" />
            <BrushWidget Id="ItemRank2" Brush="Item.Rank.Icon_2" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
              SuggestedWidth="15" SuggestedHeight="15" IsVisible="@Rank2Visible" />   
            <BrushWidget Id="ItemRank3" Brush="Item.Rank.Icon_3" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
              SuggestedWidth="15" SuggestedHeight="15" IsVisible="@Rank3Visible" />

            <!-- Item is Currently Equipped check mark -->
            <BrushWidget Id="ItemEquipped" Brush="Item.Equipped.Icon" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed"
              SuggestedWidth="15" SuggestedHeight="15" HorizontalAlignment="Right" VerticalAlignment="Top"
              PositionYOffset="30" IsVisible="@IsEquipped" />                                

            <!-- Quantity text (e.g., "12") -->
            <TextWidget Text="@QuantityText"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                MarginRight="4"
                MarginBottom="2"
                Brush="Inventory.ItemCountText"
                IsVisible="@QuantityText != ''"
                DoNotAcceptEvents="True" />
            <TextWidget Text="@ItemName"
                WidthSizePolicy="StretchToParent"
                HeightSizePolicy="CoverChildren"
                HorizontalAlignment="Center"
                VerticalAlignment="Bottom"
                Brush="InventorySlot.ItemName.Text"
                DoNotAcceptEvents="True" PassEventsToParent="True" />
          </Children>
        </ButtonWidget>
      </Children>
    </Widget>
  </Window>
</Prefab>
