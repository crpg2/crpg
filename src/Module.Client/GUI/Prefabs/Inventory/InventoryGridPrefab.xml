<Prefab Name="InventoryGridPrefab">
  <Parameters>
    <Parameter Name="NumColumns" DefaultValue="5" />
  </Parameters>
  <Constants>
    <Constant Name="Background.Width" Value="510"/>
    <Constant Name="Background.Height" Value="410"/>
    <Constant Name="ScrollingItemGrid.Width" Value="475"/>
  </Constants>

  <Window>
    <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" StackLayout.LayoutMethod="VerticalBottomToTop" Spacing="0">
      <Children>
        <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" SuggestedWidth="!Background.Width" SuggestedHeight="!Background.Height">
          <Children>
            <!-- Main Background -->
            <BrushWidget Id="MainBackGround" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Sprite="SquareWRoundedCornersFrame_9" Color="#ffffffff">
              <Children>
                <BrushWidget MarginLeft="10" MarginRight="10" MarginTop="10" MarginBottom="10" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="CrpgInventory.Grid.BackGround">
                </BrushWidget>
              </Children>
            </BrushWidget>


            <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" StackLayout.LayoutMethod="HorizontalLeftToRight" Spacing="0">
              <Children>
                <!-- Vertical Item Categories/Filter -->
                <ListPanel PositionYOffset="60" MarginLeft="15" MarginRight="0" MarginTop="15" MarginBottom="0" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalBottomToTop" Spacing="2" DataSource="{InventorySortTypesLeft}">
                  <ItemTemplate>
                    <InventorySortTypePrefab DataSource="." MarginBottom="10"/>
                  </ItemTemplate>
                </ListPanel>                

                <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" StackLayout.LayoutMethod="VerticalBottomToTop" Spacing="0" MarginTop="15">
                  <Children>
                    <!-- Horizontal Top Item Categories/Filter -->
                    <ListPanel MarginLeft="10" MarginRight="0" MarginTop="0" MarginBottom="0" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="HorizontalLeftToRight" Spacing="0" DataSource="{InventorySortTypesTop}">
                      <ItemTemplate>
                        <InventorySortTypePrefab DataSource="." MarginRight="10" />
                      </ItemTemplate>
                    </ListPanel>

                    <!-- Scrolling Item grid -->
                    <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" HorizontalAlignment="Center" VerticalAlignment="Center" MarginLeft="0" MarginRight="10" MarginBottom="0" MarginTop="0">
                      <Children>
                        <BrushWidget Id="ItemGridBackground" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Sprite="SquareWRoundedCornersFrame_9" Color="#ffffffff">
                        </BrushWidget> 
                        <ScrollablePanel Id="ScrollablePanel" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" HorizontalAlignment="Center" VerticalAlignment="Center" AutoHideScrollBars="true" ClipRect="ClipRect" InnerPanel="ClipRect\InventoryGrid" VerticalScrollbar="..\VerticalScrollbar" MarginLeft="10" MarginRight="10" MarginTop="10" MarginBottom="10">
                          <Children>            
                            <Widget Id="ClipRect" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" ClipContents="true" VerticalAlignment="Top">
                              <Children>
                                <GridWidget Id="InventoryGrid" DataSource="{FilteredItems}" ColumnCount="*NumColumns" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" DefaultCellHeight = "80" DefaultCellWidth="80" HorizontalAlignment="Left" VerticalAlignment="Top" MarginTop="5" MarginBottom="5" SpacingX="2" SpacingY="5">
                                  <ItemTemplate>
                                    <InventorySlotPrefab DataSource="." />
                                  </ItemTemplate>
                                </GridWidget>
                              </Children>
                            </Widget>
                          </Children>
                        </ScrollablePanel>
                        <ScrollbarWidget Id="VerticalScrollbar" WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="8" HorizontalAlignment="Right" VerticalAlignment="Center" MarginTop="10" MarginBottom="0" AlignmentAxis="Vertical" Handle="VerticalScrollbarHandle" MaxValue="100" MinValue="0">
                          <Children>
                            <Widget WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="4" HorizontalAlignment="Center" Sprite="BlankWhiteSquare_9" AlphaFactor="0.3" Color="#515897ff" />
                            <ImageWidget Id="VerticalScrollbarHandle" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="8" SuggestedHeight="10" HorizontalAlignment="Center" Brush="InventoryGrid.Scrollbar.Handle" />
                          </Children>
                        </ScrollbarWidget>
                      </Children>
                    </Widget>
                    <!-- end scrolling item grid -->
                    <BrushWidget Id="ButtonBackgroundFrame" 
                                WidthSizePolicy="Fixed" SuggestedWidth="120"
                                HeightSizePolicy="Fixed" SuggestedHeight="40"
                                VerticalAlignment="Center" HorizontalAlignment="Center"
                                MarginBottom="5"
                                PassEventsToParent="false"
                                Sprite="SquareWRoundedCornersFrame_9" Color="#ffffffff">
                      <Children>
                        <ButtonWidget Id="ButtonRefreshFromApi" Brush="CharacterEdit.Button"
                                  WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent"
                                  MarginTop="10" MarginBottom="10" MarginLeft="10" MarginRight="10"
                                  AcceptDrag="false"
                                  DoNotPassEventsToChildren="true"
                                  Command.Click="ExecuteClick"
                                  IsEnabled="true" /> <!-- @IsButtonRefreshFromApiEnabled" -->
                        <TextWidget Text="Refresh API" WidthSizePolicy="Fixed" SuggestedWidth="100" HeightSizePolicy="Fixed" SuggestedHeight="30"
                          MarginTop="5"
                          DoNotAcceptEvents="true"
                          HorizontalAlignment="Center" Brush="CharacterEdit.Item.Text" />
                      </Children>
                    </BrushWidget>

                  </Children>
                </ListPanel>
              </Children>           
            </ListPanel>
          </Children>
        </Widget>        
      </Children>
    </ListPanel>
  </Window>
</Prefab>